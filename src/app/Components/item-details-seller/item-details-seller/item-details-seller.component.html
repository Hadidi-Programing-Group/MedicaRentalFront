<div class="container rounded mt-5 mb-5 bg-white">
  <div class="row">
    <div class="col-md-5 border-right"></div>
    <form [formGroup]="UpdateItemForm" class="row mt-3" *ngIf="currentUser">
      <!-- *ngIf="!currentUser?.isGrantedRent" -->

      <div class="col-xs-12">
        <label class="labels">Item name</label>
        <input
          type="text"
          class="form-control"
          formControlName="ItemName"
          placeholder="Item Name"
        />
        <div
          *ngIf="
            UpdateItemForm.get('ItemName')?.hasError('required') &&
            IsSubmitButtonClicked
          "
          class="text-danger"
        >
          Item name is required!
        </div>
      </div>
      <div class="col-xs-12">
        <label class="labels">Description</label>
        <input
          type="text"
          class="form-control"
          formControlName="description"
          placeholder="Description"
        />
        <div
          *ngIf="
            UpdateItemForm.get('Description')?.hasError('required') &&
            IsSubmitButtonClicked
          "
          class="text-danger"
        >
          Description is required!
        </div>
      </div>
      <div class="col-xs-12">
        <label class="labels">Serial number</label
        ><input
          type="text"
          class="form-control"
          formControlName="serialNumber"
          placeholder="Serial Number"
        />
        <div
          *ngIf="
            UpdateItemForm.get('serialNumber')?.hasError('required') &&
            IsSubmitButtonClicked
          "
          class="text-danger"
        >
          Serial number is required!
        </div>
      </div>

      <div class="col-xs-12">
        <label class="labels">Model</label
        ><input
          type="text"
          class="form-control"
          formControlName="model"
          placeholder="Model"
        />
        <div
          *ngIf="
            UpdateItemForm.get('model')?.hasError('required') &&
            IsSubmitButtonClicked
          "
          class="text-danger"
        >
          Model is required!
        </div>
      </div>

      <div class="col-xs-12">
        <label class="labels">Stock</label
        ><input
          type="number"
          class="form-control"
          formControlName="Stock"
          placeholder="Stock"
        />
        <div
          *ngIf="
            UpdateItemForm.get('Stock')?.hasError('required') &&
            IsSubmitButtonClicked
          "
          class="text-danger"
        >
          Stock is required!
        </div>
      </div>

      <div class="col-xs-12">
        <label class="labels">Price</label
        ><input
          type="number"
          class="form-control"
          formControlName="Price"
          placeholder="Price"
        />
        <div
          *ngIf="
            UpdateItemForm.get('Price')?.hasError('required') &&
            IsSubmitButtonClicked
          "
          class="text-danger"
        >
          Price is required!
        </div>
      </div>

      <div class="col-xs-12">
        <label for="category-select">Category:</label>
        <select
          class="form-select form-select-lg"
          id="category-select"
          (ngModelChange)="onSelectCategory($event)"
          formControlName="CategoryName"
        >
          <option *ngFor="let category of categories" value="{{ category.id }}">
            {{ category.name }}
          </option>
        </select>
      </div>

      <div class="col-xs-12">
        <label for="sub-category-select">Subcategory:</label>
        <select
          class="form-select form-select-lg"
          id="sub-category-select"
          (ngModelChange)="onSelectSubCategory($event)"
          formControlName="SubCategoryName"
        >
          <option
            *ngFor="let subCategory of subcategories"
            value="{{ subCategory.id }}"
          >
            {{ subCategory.name }}
          </option>
        </select>
      </div>

      <div class="col-xs-12 col-lg-6 form-outline">
        <label class="labels">Item Image</label>
        <div style="height: 200px; overflow: hidden" class="mb-3">
          <img
            style="object-fit: contain; width: 100%; height: 100%"
            class="img-fluid"
            src="{{ ItemImgBase64 }}"
          />
        </div>
        <input
          type="file"
          formControlName="ItemImg"
          name="ItemImg"
          id="ItemImg"
          class="form-control"
          accept="image/png, image/jpeg, image/jpg"
          (change)="onItemImgSelected($event)"
          placeholder="Item Image"
        />
        <div
          *ngIf="
            UpdateItemForm.get('ItemImg')?.hasError('required') &&
            IsSubmitButtonClicked
          "
          class="text-danger"
        >
          Item Image is required!
        </div>
        <div
          *ngIf="
            UpdateItemForm.get('ItemImg')?.hasError('invalidFileType') &&
            UpdateItemForm.get('ItemImg')?.touched
          "
          class="text-danger"
        >
          Invalid image type!
        </div>
      </div>
      <div class="mt-3 text-center">
        <button
          *ngIf="!IsApproveUpdated"
          class="btn btn-primary profile-button"
          (click)="onApprovalInfoSubmit()"
        >
          Update Item Data
        </button>
        <!-- <input  value="Update Images" type="submit" /> -->
        <div
          *ngIf="IsApproveUpdated"
          class="mt-2 alert alert-success"
          role="alert"
        >
          Images has been updated.
        </div>
      </div>
    </form>
  </div>
</div>
